<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>datamodel syntax</title>
  <meta name="description" content="Main page for documentation and resources.">

  <link rel="stylesheet" href="http://fccsw.web.cern.ch/fccsw/css/main.css">
  <link rel="canonical" href="http://fccsw.web.cern.ch/fccsw/tutorials/podio/doc/datamodel_syntax.html">
  <link rel="alternate" type="application/rss+xml" title="FCCSW" href="http://fccsw.web.cern.ch/fccsw/feed.xml">
</head>


  <body>

    
<header>
   <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://fccsw.web.cern.ch/fccsw/index.html">FCCSW</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li ><a href="http://fccsw.web.cern.ch/fccsw/index.html">Home</a></li>
            <li  class="active" ><a href="http://fccsw.web.cern.ch/fccsw/tutorials">Tutorials</a></li>
            <li><a>Latest Releases:</a></li>
            
            
              
              <li >
                <a href="http://fccsw.web.cern.ch/fccsw/2017/05/15/version081.html">FCCSW v0.8.1</a>
              </li>
              
            
              
              <li >
                <a href="http://fccsw.web.cern.ch/fccsw/2017/03/29/version08.html">FCCSW v0.8</a>
              </li>
              
            
            <li ><a href="http://fccsw.web.cern.ch/fccsw/snapshot.html">Snapshot</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <div class="input-group">
            <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></span>
            <input type="text" class="form-control" id="search-input" placeholder="Search" aria-describedby="basic-addon1">
            </div>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

</header>
<div class="container">
  <div class="collapse panel panel-default" id="resultswrap">
      <div class="panel-heading">Search Results <button type="button" class="close" aria-label="Close"><span aria-hidden="true" onclick="$('#resultswrap').collapse('hide');">&times;</span></button></div>
      <ul id="searchresults" class="list-group">
      </ul>
  </div>
</div>

    
    
    <div class="container">
      <div class="col-md-10">
        <h1 id="data-models-and-data-model-definitions">Data Models and Data Model Definitions</h1>

<p>To describe a data model PODIO provides a data model definition syntax.
This is to ease the creation of optimised data formats, which may take advantage of a so-called <code class="highlighter-rouge">struct-of-array</code> data layout.
From the user-provided data model description PODIO creates all the files necessary to use this data model.</p>

<h2 id="basic-concepts-and-supported-features">Basic Concepts and Supported Features</h2>
<p>PODIO encourages the usage of composition, rather than inheritance.
One of the reasons for doing so is the focus on efficiency friendly <code class="highlighter-rouge">plain-old-data</code>. 
For this reason, PODIO does not support inheritance within the defined data model. 
Instead, users can combine multiple <code class="highlighter-rouge">components</code> to build a to be used <code class="highlighter-rouge">datatype</code>.</p>

<p>To allow the datatypes to be real PODs, the data stored within the data model are constrained to be
POD-compatible data. Those are</p>

<ol>
  <li>basic types like int, double, etc</li>
  <li>components built up from basic types or other components</li>
  <li>Fixed sized arrays of those types</li>
</ol>

<p>In addition, PODIO supports the storage of one-to-one and one-to-many relations between objects.
In the following the syntax for defining a given data model is explained. 
A later section contains more details about the code being created from this.</p>

<h2 id="definition-of-custom-components">Definition of custom components</h2>
<p>A component is just a flat struct containing data. it can be defined via:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>components:
  # My example component
  MyComponent:
    x : float
    y : float
    z : float
    a : AnotherComponent
</code></pre>
</div>

<h2 id="definition-of-custom-data-classes">Definition of custom data classes</h2>
<p>Here an excerpt from “datamodel.yaml” for a simple class, just containing one member of the type <code class="highlighter-rouge">int</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>datatypes :
  EventInfo :
    Description : "My first data type"
    Author : "It's me"
    Members :
    - int Number // event number
</code></pre>
</div>

<p>Using this definition, three classes will be created: <code class="highlighter-rouge">EventInfo</code>, <code class="highlighter-rouge">EventInfoData</code> and <code class="highlighter-rouge">EventInfoCollection</code>. These have the following signature:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class EventInfoData {
  public:
    int Number;
}

class EventInfo {
  public:
  ...
    int Number() const;
    void Number(int);
  ...
}
</code></pre>
</div>

<h3 id="defining-members">Defining members</h3>

<p>The definition of a member is done in the <code class="highlighter-rouge">Members</code> section in the form:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Members:
  &lt;type&gt; &lt;name&gt; // &lt;comment&gt;
</code></pre>
</div>

<p>where <code class="highlighter-rouge">type</code> can be any buildin-type or a <code class="highlighter-rouge">component</code>.</p>

<h3 id="definition-of-references-between-objects">Definition of references between objects:</h3>
<p>There can be one-to-one-relations and one-to-many relations being stored in a particular class. This happens either in the <code class="highlighter-rouge">OneToOneRelations</code> or <code class="highlighter-rouge">OneToManyRelations</code> section of the data definition. The definition has again the form:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>OneToOneRelations:
  &lt;type&gt; &lt;name&gt; // &lt;comment&gt;
OneToManyRelations:
  &lt;type&gt; &lt;name&gt; // &lt;comment&gt;
</code></pre>
</div>

<h3 id="explicit-definition-of-methods">Explicit definition of methods</h3>
<p>In a few cases, it makes sense to add some more functionality to the created classes. Thus this library provides two ways of defining additional methods and code. Either by defining them inline or in external files. Extra code has to be provided separately for const and non-const additions.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ExtraCode:
  declaration: &lt;string&gt;
  implementation : &lt;string&gt;
  declarationFile: &lt;string&gt; (to be implemented!)
  implementationFile: &lt;string&gt; (to be implemented!)
ConstExtraCode:
  declaration: &lt;string&gt;
  implementation : &lt;string&gt;
  declarationFile: &lt;string&gt; (to be implemented!)
  implementationFile: &lt;string&gt; (to be implemented!)
</code></pre>
</div>

<p>The code being provided has to use the macro <code class="highlighter-rouge"><span class="p">{</span><span class="err">name</span><span class="p">}</span></code> in place of the concrete name of the class.</p>

<h2 id="global-options">Global options</h2>
<p>Some customization of the generated code is possible through flags. These flags are listed in the section <code class="highlighter-rouge">options</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>options:
  getSyntax: False
  exposePODMembers: True
components:
  # My simple component
  ExampleComponent:
    x : int
datatypes:
  ExampleType:
    Description: "My datatype with a component member"
    Author: "Mr me"
    Members:
     - ExampleComponent comp // component from above
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">getSyntax</code>: steers the naming of get and set methods. If set to true, methods are prefixed with <code class="highlighter-rouge">get</code> and <code class="highlighter-rouge">set</code> following the capitalized member name, otherwise the member name is used for both.</li>
  <li><code class="highlighter-rouge">exposePODMembers</code>: whether get and set methods are also generated for members of a member-component. In the example corresponding methods would be generated to directly set / get <code class="highlighter-rouge">x</code> through <code class="highlighter-rouge">ExampleType</code>.</li>
</ul>


      </div>
      <div class="col-md-2">    <ul class="list-group">
        <li class="list-group-header">
            <h4>External links</h4>
        </li>
        
            <li class="list-group-item">
                <a href='http://cern.ch/simba3/SelfSubscription.aspx?groupName=fcc-experiments-sw-dev'>FCCSW Mailing list</a>
            </li>
        
            <li class="list-group-item">
                <a href='http://fccsw.web.cern.ch/fccsw/tutorials/'>FCCSW Tutorials</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/fccsw/issues'>FCCSW Issue Tracker</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/'>FCCSW on GitHub</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://phsft-jenkins.cern.ch/view/FCC/'>FCCSW Jenkins</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/FCCSW/blob/master/doc/CppCodingStyleGuidelines.md'>FCCSW C++ Style Guide</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/FCCSW/blob/master/doc/GeneralCppGuidelines.md'>General C++ Guidelines</a>
            </li>
        
    </ul>
</div>
    </div>
    <script src="http://fccsw.web.cern.ch/fccsw/node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/bootstrap-sass/assets/javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/requirejs/require.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/simple-jekyll-search/dest/simple-jekyll-search.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/javascript">
      SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('searchresults'),
        json: 'http://fccsw.web.cern.ch/fccsw/search.json',
        searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: '<li class="list-group-item">No results found</li>',
        limit: 10,
        fuzzy: false,
        exclude: ['Welcome']
      });
      $("#search-input").keypress(function() {
            $("#resultswrap").collapse('show');
      });
      $("#search-input").keyup(function() {
            if ($(this).val() == "") {
                $("#resultswrap").collapse('hide');
            }
      });
      $("table").each(function(index) {
        $(this).addClass("table");
      });
    </script>


  </body>
</html>

<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Fcc Software Git</title>
  <meta name="description" content="Main page for documentation and resources.">

  <link rel="stylesheet" href="http://fccsw.web.cern.ch/fccsw/css/main.css">
  <link rel="canonical" href="http://fccsw.web.cern.ch/fccsw/tutorials/fcc-tutorials/FccSoftwareGit.html">
  <link rel="alternate" type="application/rss+xml" title="FCCSW" href="http://fccsw.web.cern.ch/fccsw/feed.xml">
</head>


  <body>

    
<header>
   <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://fccsw.web.cern.ch/fccsw/index.html">FCCSW</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li ><a href="http://fccsw.web.cern.ch/fccsw/index.html">Home</a></li>
            <li  class="active" ><a href="http://fccsw.web.cern.ch/fccsw/tutorials">Tutorials</a></li>
            <li><a>Latest Releases:</a></li>
            
            
              
              <li >
                <a href="http://fccsw.web.cern.ch/fccsw/2017/05/15/version081.html">FCCSW v0.8.1</a>
              </li>
              
            
              
              <li >
                <a href="http://fccsw.web.cern.ch/fccsw/2017/03/29/version08.html">FCCSW v0.8</a>
              </li>
              
            
            <li ><a href="http://fccsw.web.cern.ch/fccsw/snapshot.html">Snapshot</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <div class="input-group">
            <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></span>
            <input type="text" class="form-control" id="search-input" placeholder="Search" aria-describedby="basic-addon1">
            </div>
          </form>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

</header>
<div class="container">
  <div class="collapse panel panel-default" id="resultswrap">
      <div class="panel-heading">Search Results <button type="button" class="close" aria-label="Close"><span aria-hidden="true" onclick="$('#resultswrap').collapse('hide');">&times;</span></button></div>
      <ul id="searchresults" class="list-group">
      </ul>
  </div>
</div>

    
    
    <div class="container">
      <div class="col-md-10">
        <h1 id="github-workflow-and-contribution-guide">Github workflow and contribution guide</h1>

<p><strong>Contents</strong></p>

<!-- TOC -->

<ul>
  <li><a href="#github-workflow-and-contribution-guide">Github workflow and contribution guide</a>
    <ul>
      <li><a href="#overview">Overview</a></li>
      <li><a href="#first-time-setup-of-git">First time setup of git</a></li>
      <li><a href="#generate-and-set-up-ssh-keys-for-github">Generate and set up ssh keys for github</a></li>
      <li><a href="#improving-your-git-experience">Improving your git experience</a></li>
      <li><a href="#development-workflow">Development workflow</a>
        <ul>
          <li><a href="#keeping-your-local-repository-up-to-date">Keeping your local repository up to date</a></li>
          <li><a href="#contributing-code">Contributing code</a></li>
        </ul>
      </li>
      <li><a href="#recommendations">Recommendations</a>
        <ul>
          <li><a href="#general-recommendations">General recommendations</a></li>
          <li><a href="#commit-comments">Commit comments</a></li>
          <li><a href="#cleaning-history">Cleaning history</a></li>
          <li><a href="#pull-requests">Pull requests</a></li>
        </ul>
      </li>
      <li><a href="#trouble-shooting">Trouble-shooting</a>
        <ul>
          <li><a href="#when-i-try-to-push-to-the-repository-i-get-an-authentication-error">When I try to push to the repository, I get an authentication error</a></li>
          <li><a href="#i-have-cloned-with-https-and-now-i-cant-push-my-changes-what-do-i-do">I have cloned with https and now I can’t push my changes, what do I do?</a></li>
        </ul>
      </li>
      <li><a href="#need-help">Need help?</a></li>
    </ul>
  </li>
</ul>

<!-- /TOC -->

<hr />

<h2 id="overview">Overview</h2>

<p>This page should allow users that are new to Git to get started with the FCC
software, and describes the workflow for accessing and contributing FCC
code.</p>

<p>For a general introduction to git, have a look at these tutorials:</p>

<ul>
  <li><a href="https://www.atlassian.com/git/tutorials/">Atlassian tutorial</a></li>
  <li><a href="http://pcottle.github.io/learnGitBranching/">Interactive tutorial</a></li>
  <li><a href="https://git-scm.com/book/en/v2">The git book</a></li>
</ul>

<h2 id="first-time-setup-of-git">First time setup of git</h2>

<p>Please refer to <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">this tutorial</a> and the <a href="https://help.github.com/articles/set-up-git/">GitHub help</a>.</p>

<h2 id="generate-and-set-up-ssh-keys-for-github">Generate and set up ssh keys for github</h2>

<p>When working on lxplus we recommend to clone github repositories via SSH, especially if you want to contribute code. For this to work, you need to generate ssh keys for authentication. See the corresponding github <a href="https://help.github.com/articles/generating-an-ssh-key/">help-page</a>.</p>

<blockquote>
  <p>If you only want to use the software it may be easier to use https. In that case you don’t need to generate the keys but have to replace <code class="highlighter-rouge">git@github:</code> with <code class="highlighter-rouge">https://github.com/</code> in all the instructions. Note that you’ll not be able to push to your repository when you are on lxplus. You can also start using https for now and later re-add your repository with ssh authentication, see the <a href="#trouble-shooting">trouble shooting section</a></p>
</blockquote>

<h2 id="improving-your-git-experience">Improving your git experience</h2>

<p>It may be useful to install <a href="https://github.com/git/git/tree/master/contrib/completion">Git integration tools</a> for your shell that allow tab-completion of most git commands and also can show you in your prompt on which branch you currently are, what changes you have pending, etc.</p>

<h2 id="development-workflow">Development workflow</h2>

<p>You will be using (at least) 3 versions of the FCCSW repository:</p>

<ol>
  <li>The official <a href="https://github.com/HEP-FCC/FCCSW">FCCSW on github</a></li>
  <li>Your fork of FCCSW on github (see <a href="https://help.github.com/articles/fork-a-repo/">github help</a> on what that means)</li>
  <li>Your local repository copy in your work area (e.g. on AFS)</li>
</ol>

<p>The repositories 1 and 2 are added as remote to the repository 3:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone git@github.com:[YOUR_GITHUB_USER]/FCCSW.git <span class="c"># create a local copy (3) of your fork (2)</span>
<span class="nb">cd </span>FCCSW
git remote add hep-fcc git@github.com:HEP-FCC/FCCSW.git <span class="c"># add official repo (1) as additional remote</span>
</code></pre>
</div>

<h3 id="keeping-your-local-repository-up-to-date">Keeping your local repository up to date</h3>

<ul>
  <li>
    <p>fetch all changes from the official repository (1)</p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>git fetch hep-fcc
</code></pre>
    </div>
  </li>
  <li>
    <p>rebase your development area to the master branch from the official repository (1), <strong>please read <a href="https://www.atlassian.com/git/tutorials/rewriting-history">this</a> to avoid loss of work</strong></p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>git rebase -i hep-fcc/master
</code></pre>
    </div>

    <p>in this process you can also fix any commits that need touching up, <strong>be aware that deleting commits in the list will result also in the deletion of the corresponding changes</strong> (more info in the <a href="https://help.github.com/articles/about-git-rebase/">GitHub help</a> and the <a href="https://www.atlassian.com/git/tutorials/rewriting-history">Atlassian tutorial</a>)</p>
  </li>
  <li>
    <p>push your local changes to your fork (2), see <a href="#contributing-code">below</a> how to create a local branch</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git push origin [NAME_OF_LOCAL_BRANCH]
</code></pre>
    </div>
  </li>
</ul>

<h3 id="contributing-code">Contributing code</h3>

<ul>
  <li>if you are fixing a bug, first create an issue in the github <a href="https://github.com/HEP-FCC/FCCSW/issues">issue tracker</a></li>
  <li>
    <p>develop your feature in your local copy (3) on a local branch of your choice, to create a branch do:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git branch -b [NAME_OF_LOCAL_BRANCH]
</code></pre>
    </div>
  </li>
  <li>refer to <a href="https://www.atlassian.com/git/tutorials/saving-changes">this tutorial</a> to see how to commit changes</li>
  <li>occasionally, get new code from the official repository (1) as explained above and merge it in this branch</li>
  <li>test:
    <ul>
      <li>that the code compiles and all tests succeed (<code class="highlighter-rouge">make &amp;&amp; make test</code>)</li>
      <li>that your code runs (even better: <a href="../FCCSW/doc/AddingTestsToFCCSW.html">add an automatic test</a>)</li>
      <li>that it produces the expected results</li>
    </ul>
  </li>
  <li>push your local branch to your fork (2) (see <a href="#keeping-your-local-repository-up-to-date">above</a>)</li>
  <li>create a pull request from your fork (2) to the offical repository’s (1) master branch (see github <a href="https://help.github.com/articles/creating-a-pull-request/">help-page</a>)
    <ul>
      <li>also see the <a href="#pull-requests">recommendations for pull requests</a></li>
    </ul>
  </li>
</ul>

<h2 id="recommendations">Recommendations</h2>

<p>Please always follow the recommendations below.</p>

<h3 id="general-recommendations">General recommendations</h3>

<ul>
  <li>if you’re working on a given topic, always create a branch for
it, e.g. pythia_interface. You may commit many times to this branch
in your local repository. When you have something solid create a
pull request to the official FCCSW repository.</li>
  <li>Have a look at our <a href="../FCCSW/doc/CppCodingStyleGuidelines.html">coding guidelines</a>.</li>
</ul>

<h3 id="commit-comments">Commit comments</h3>

<ul>
  <li>feel free to commit often to your local repository, make a pull request once the topic you are working on is finished
    <ul>
      <li>if the feature you are working on is large, consider making a work in progress-pull request (see <a href="#pull-requests">below</a>)</li>
    </ul>
  </li>
  <li>always provide a meaningful comment for each commit
    <ul>
      <li>if you are working on an issue, refer to that issue by adding “refs. #[issue id]”, see also
<a href="https://help.github.com/articles/closing-issues-via-commit-messages/">GitHub help</a></li>
    </ul>
  </li>
  <li>
    <p>commit comments should look like the one below, so that they show up
correctly in git printouts.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>first version of a pythia interface # this line should be a short 1 liner

Here, you may write a few more lines if needed
</code></pre>
    </div>
  </li>
</ul>

<h3 id="cleaning-history">Cleaning history</h3>

<ul>
  <li>
    <p>before opening a pull request it may be a good idea to check that your history makes sense (commit messages explain what you did, no unnecessary commits, etc.), check with:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git log
</code></pre>
    </div>
  </li>
  <li>
    <p>if you see commits that you’d like to change, there are several ways of doing that, the most commonly used is <code class="highlighter-rouge">git rebase</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git fetch hep-fcc # get changes from the official repo
git rebase -i hep-fcc/master # do the actual rebase
</code></pre>
    </div>

    <ul>
      <li>with the interactive version you can rebase your development branch to the official master and fix the history at the same time</li>
      <li>git will guide you through the steps, where you can delete entire commits (and the corresponding changes), merge commits and change commit messages</li>
      <li>more information can be found in <a href="https://www.atlassian.com/git/tutorials/rewriting-history#git-rebase-i">this tutorial</a></li>
    </ul>
  </li>
</ul>

<h3 id="pull-requests">Pull requests</h3>

<ul>
  <li>Give a meaningful title that appropriately describes what you did (e.g. Add new calorimeter clustering)
    <ul>
      <li>Pull requests of work in progress (to make people aware that you are working on a feature) create a PR starting with “[WIP]”</li>
    </ul>
  </li>
  <li>In the description, give a short bullet-point list of what was done</li>
  <li>If your pull request fixes issues tracked in the <a href="https://github.com/HEP-FCC/FCCSW/issues">issue tracker</a>:
    <ul>
      <li>Make sure you added a test that shows they are actually fixed</li>
      <li>In the description mention that you fixed it by referring to the issue: “fixes #<issue-id>" (this will automatically close the issue, see also [GitHub help](https://help.github.com/articles/closing-issues-via-commit-messages/))</issue-id></li>
    </ul>
  </li>
</ul>

<h2 id="trouble-shooting">Trouble-shooting</h2>

<h3 id="when-i-try-to-push-to-the-repository-i-get-an-authentication-error">When I try to push to the repository, I get an authentication error</h3>

<p>Check with <code class="highlighter-rouge">git remote -v</code> which remote repositories you have added to your local copy. You should see something like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>hep-fcc	git@github.com:HEP-FCC/FCCSW.git (fetch)
hep-fcc	git@github.com:HEP-FCC/FCCSW.git (push)
origin	git@github.com:[your git user name]/FCCSW.git (fetch)
origin	git@github.com:[your git user name]/FCCSW.git (push)
</code></pre>
</div>

<p>If you see something similar but all the addresses start with <code class="highlighter-rouge">https</code>, see <a href="#i-have-cloned-with-https-and-now-i-cant-push-my-changes-what-do-i-do">below</a>.</p>

<p>If you only see <code class="highlighter-rouge">origin git@github.com:HEP-FCC/FCCSW.git</code>, you need to add your own repository, push to that one and do a pull request, as described above. To add your own repository do:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git remote rename origin hep-fcc
git remote add myfccsw git@github.com:[your git user name]/FCCSW.git
</code></pre>
</div>

<h3 id="i-have-cloned-with-https-and-now-i-cant-push-my-changes-what-do-i-do">I have cloned with https and now I can’t push my changes, what do I do?</h3>

<p>You only need to change the URL of your remote pointing to your repository to one that uses SSH instead:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git remote set-url [the remote name] git@github.com:[your git user name]/FCCSW.git
</code></pre>
</div>

<p>Now you can push to that remote with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>git push [the remote name] [the branch you want to push]
</code></pre>
</div>

<hr />

<h2 id="need-help">Need help?</h2>

<p>In case you have any questions on this guide, or need help to sort out
an issue with a repository, feel free to drop a mail to
fcc-experiments-sw-dev at CERN, and we’ll be happy to help you.
Alternatively create an issue in the <a href="https://github.com/HEP-FCC/FCCSW/issues">bug tracker</a>
<img src="https://twiki.cern.ch/twiki/pub/TWiki/SmiliesPlugin/smile.gif" alt="smile" title="smile" /></p>

      </div>
      <div class="col-md-2">    <ul class="list-group">
        <li class="list-group-header">
            <h4>External links</h4>
        </li>
        
            <li class="list-group-item">
                <a href='http://cern.ch/simba3/SelfSubscription.aspx?groupName=fcc-experiments-sw-dev'>FCCSW Mailing list</a>
            </li>
        
            <li class="list-group-item">
                <a href='http://fccsw.web.cern.ch/fccsw/tutorials/'>FCCSW Tutorials</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/fccsw/issues'>FCCSW Issue Tracker</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/'>FCCSW on GitHub</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://phsft-jenkins.cern.ch/view/FCC/'>FCCSW Jenkins</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/FCCSW/blob/master/doc/CppCodingStyleGuidelines.md'>FCCSW C++ Style Guide</a>
            </li>
        
            <li class="list-group-item">
                <a href='https://github.com/HEP-FCC/FCCSW/blob/master/doc/GeneralCppGuidelines.md'>General C++ Guidelines</a>
            </li>
        
    </ul>
</div>
    </div>
    <script src="http://fccsw.web.cern.ch/fccsw/node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/bootstrap-sass/assets/javascripts/bootstrap.min.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/requirejs/require.js" type="text/javascript"></script>
<script src="http://fccsw.web.cern.ch/fccsw/node_modules/simple-jekyll-search/dest/simple-jekyll-search.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/javascript">
      SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('searchresults'),
        json: 'http://fccsw.web.cern.ch/fccsw/search.json',
        searchResultTemplate: '<li class="list-group-item"><a href="{url}" title="{desc}">{title}</a></li>',
        noResultsText: '<li class="list-group-item">No results found</li>',
        limit: 10,
        fuzzy: false,
        exclude: ['Welcome']
      });
      $("#search-input").keypress(function() {
            $("#resultswrap").collapse('show');
      });
      $("#search-input").keyup(function() {
            if ($(this).val() == "") {
                $("#resultswrap").collapse('hide');
            }
      });
      $("table").each(function(index) {
        $(this).addClass("table");
      });
    </script>


  </body>
</html>
